const artru_code_container=document.querySelector("#artru-code_container"),drag=artru_code_container.querySelector("#drag"),code=artru_code_container.querySelector("#code"),preview=artru_code_container.querySelector("#preview");let overlayPreview=null;function checkdrag(){if(window.innerWidth>767){function e(e){let t=artru_code_container.clientWidth,o=e.clientX-artru_code_container.getBoundingClientRect().left,n=o/t*100;code.style.width=n+"%",preview.style.width=100-n+"%"}function t(){artru_code_container.removeEventListener("mousemove",e),artru_code_container.removeEventListener("mouseup",t),overlayPreview&&(preview.removeChild(overlayPreview),overlayPreview=null)}code.style.width="50%",preview.style.width="50%",drag.addEventListener("mousedown",function(o){o.preventDefault(),(overlayPreview=document.createElement("div")).id="overlayPreview",preview.appendChild(overlayPreview),artru_code_container.addEventListener("mousemove",e),artru_code_container.addEventListener("mouseup",t)})}else code.style.width="100%",preview.style.width="100%"}checkdrag(),window.addEventListener("resize",checkdrag),ace.require("ace/ext/language_tools");var editor=ace.edit("editor"),codetextarea=artru_code_container.querySelector("#content"),previewFrame=artru_code_container.querySelector("#previewFrame");function runCode(){codetextarea.value=editor.getSession().getValue(),previewFrame.contentWindow.document.open(),previewFrame.contentWindow.document.write(codetextarea.value),previewFrame.contentWindow.document.close()}function copyCode(){navigator.clipboard.writeText(codetextarea.value).then(function(){alert("Code Copied !!!")}).catch(function(e){console.error("Code Copy error:",e)})}function beautifyCode(){var e=ace.require("ace/ext/beautify"),t=editor.getSession(),o=t.getSelection().getRange();e.beautify(t,o)}function CopyLinkCode(){let e=new TextEncoder,t=btoa(String.fromCharCode.apply(null,e.encode(codetextarea.value))),o;fetch("https://tinyurl.com/api-create.php?url="+(window.location.href.split(/[?#]/)[0]+"?--Start--"+t+"--End--")).then(e=>e.text()).then(e=>{let t=e.split("/").pop(),o=window.location.origin+window.location.pathname+"#ARTRUlinkcode="+t;navigator.clipboard.writeText(o).then(function(){alert("Link Code Created !!!")}).catch(function(e){console.error("Create Link Code error:",e)})}).catch(function(e){console.error("URL Copy error:",e),alert("!___ERROR___! Code is too long to create a link")})}function RemoveLinkCode(){let e=new URLSearchParams(window.location.hash.slice(1)),t=e.get("ARTRUlinkcode");!function e(t){fetch("https://shorturl.artru.net/?shortUrl="+encodeURIComponent(t)).then(e=>e.text()).then(e=>{let t=e,o="--Start--",n=t.indexOf(o),r=t.indexOf("--End--");if(-1!==n&&-1!==r&&n<r){let i=decodeURIComponent(t.slice(n+o.length,r)),a=new TextDecoder().decode(new Uint8Array([...atob(i)].map(e=>e.charCodeAt(0))));editor.getSession().setValue(a),beautifyCode()}})}("https://tinyurl.com/"+t)}editor.setOptions({theme:"ace/theme/monokai",mode:"ace/mode/html",showPrintMargin:!1,useSoftTabs:!1,tabSize:3,wrap:"free",keyboardHandler:"ace/keyboard/vscode",customScrollbar:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),editor.getSession().setValue(codetextarea.value),editor.getSession().on("change",runCode),document.getElementById("run-code").addEventListener("click",runCode),document.getElementById("copy-code").addEventListener("click",copyCode),editor.commands.addCommand({name:"beautify",bindKey:{win:"Shift-Tab",mac:"Shift-Tab"},exec:function(e){beautifyCode()},readOnly:!0}),document.getElementById("beautify-code").addEventListener("click",beautifyCode),document.getElementById("f1-button").addEventListener("click",function(){editor.execCommand("openCommandPallete")}),document.getElementById("ctrl-setting-button").addEventListener("click",function(){editor.execCommand("showSettingsMenu")}),document.getElementById("create-link-code")&&document.getElementById("create-link-code").addEventListener("click",CopyLinkCode),window.location.pathname.endsWith("/artru-code/")&&(window.location.hash.includes("#ARTRUlinkcode=")?RemoveLinkCode():editor.getSession().setValue(`<!DOCTYPE html>
<html>
<head>
<title></title>
</head>
<body>
<!-- HTML -->
<h1>YOUCODE</h1>


<!-- CSS -->
<style type="text/css" media="all">

</style>


<!-- JAVASCRIPT -->
<script type="text/javascript" charset="utf-8">

</script>
</body>
</html>`)),window.addEventListener("load",beautifyCode);